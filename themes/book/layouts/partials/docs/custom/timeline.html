{{ $messageData := .Site.Data.myData}}


{{$pagesByLastmod :=.Site.RegularPages.GroupByLastmod "2006-01-02"}}
{{ $pagesDictByLastmod := dict }}
{{ range $pagesByLastmod }}
    {{ $pagesDictByLastmod = $pagesDictByLastmod | merge (dict .Key  .Pages) }}
{{ end }}

{{$pagesByPublishDate :=.Site.RegularPages.GroupByPublishDate "2006-01-02"}}
{{ $pagesDictByPublishDate := dict }}
{{ range $pagesByPublishDate }}
    {{ $pagesDictByPublishDate = $pagesDictByPublishDate | merge (dict .Key .Pages) }}
{{ end }}
<div class="timeline ios_card">
  <section>
    <div class="timeline-container">
     
      {{ range $i,$v:= $messageData }}
      <div class="timeline-item card-container">
        <div class="timeline-title">
          <div>
            <h4>
              {{ $date := time.AsTime .date}}
              <span
                class="date"
                data-unix="{{ $date.Unix }} "
              >
              </span>
              {{with .drinkWater}}
              <span> {{.}}L </span>
              {{end}}
              <span>
                {{ with .sleepTime }}
                  {{ printf "%s点睡,%s点起" (index . 0) (index . 1) }}
                {{ end }}
              </span>
              {{with .bikeToHome}}
              <span>保持骑行,开始骑行时间{{.}} </span>
              {{end}}
            </h4>
          </div>
        </div>

        {{with .events}} {{range .}}
        <div class="timeline-content events">
          <h4>{{.}}</h4>
        </div>

        {{end}} {{end}} 

        {{with index $pagesDictByLastmod  ($date.Format "2006-01-02")}}
        <div class="timeline-content md_update">
          <h4>
            更新了 {{range .}}
            <a class="MDtitle" href="{{.RelPermalink}}"> 📄{{.Title}} </a>

            {{end}}
          </h4>
        </div>

        {{end}} 

        {{with index $pagesDictByPublishDate  ($date.Format "2006-01-02")}}
        <div class="timeline-content md_create">
          <h4>
            创建了 {{range .}}
            <a class="MDtitle" href="{{.RelPermalink}}"> 📄{{.Title}} </a>

            {{end}}
          </h4>
        </div>

        {{end}}
      </div>

      {{ end }}
    </div>
  </section>
  <script>
    // 在页面加载时执行的 JavaScript 代码
    window.onload = function () {
      // 更新具有 "LastChange" 类名的元素的时间戳
      updateDateTimeByElementClass("date");
    };
  </script>
</div>
